FIND_PROGRAM(PYTHON python)
FIND_PACKAGE(PythonLibs)
INCLUDE_DIRECTORIES(${PYTHON_INCLUDE_PATH})

SET_SOURCE_FILES_PROPERTIES(${CMAKE_CURRENT_BINARY_DIR}/eaSDIF_wrap.cxx PROPERTIES GENERATED true)

FOREACH(FILE easdif-python.i  )
SET_SOURCE_FILES_PROPERTIES(${CMAKE_CURRENT_SOURCE_DIR}/${FILE} PROPERTIES CPLUSPLUS ON)
ENDFOREACH (FILE easdif-python.i )

#SET_SOURCE_FILES_PROPERTIES(example.i PROPERTIES SWIG_FLAGS "-includeall")

SET(CMAKE_SWIG_FLAGS "-I${CMAKE_SOURCE_DIR}/python")
SWIG_ADD_MODULE(eaSDIF python ${CMAKE_CURRENT_SOURCE_DIR}/easdif-python.i    )
SWIG_LINK_LIBRARIES(eaSDIF ${PYTHON_LIBRARIES} Easdif${DEBUGEXT})

ADD_DEPENDENCIES(${SWIG_MODULE_eaSDIF_REAL_NAME} ${SWIG_COMMON_EASDIF_SRC})
CONFIGURE_FILE(${CMAKE_CURRENT_SOURCE_DIR}/test.py.in ${CMAKE_CURRENT_BINARY_DIR}/test.py)
ADD_CUSTOM_TARGET(pythontest
COMMAND LD_LIBRARY_PATH=$(CMAKE_BINARY_DIR)/easdif ${PYTHON} ${CMAKE_CURRENT_BINARY_DIR}/test.py)
