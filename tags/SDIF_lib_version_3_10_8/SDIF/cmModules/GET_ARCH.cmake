# determine architecture
IF( NOT ARCH )
  FIND_PROGRAM(ARCH_EXECUTABLE arch)
  IF(ARCH_EXECUTABLE)
    MESSAGE(STATUS "Use 'arch' to determine ARCH!")
    EXEC_PROGRAM(${ARCH_EXECUTABLE} OUTPUT_VARIABLE ARCH RETURN_VALUE RES)
  ELSE(ARCH_EXECUTABLE)
    FIND_PROGRAM(UNAME_EXECUTABLE uname)
    IF(UNAME_EXECUTABLE)
      MESSAGE(STATUS "Use 'uname -m' to determine ARCH!")
      EXEC_PROGRAM(${UNAME_EXECUTABLE} ARGS -m OUTPUT_VARIABLE ARCH RETURN_VALUE RES)
    ELSE(UNAME_EXECUTABLE)
      MESSAGE(STATUS "Use cmake variable CMAKE_SYSTEM_PROCESSOR to determine ARCH!")
      IF(CMAKE_SYSTEM_PROCESSOR STREQUAL "athlon")
	SET(ARCH "i686")
      ELSE(CMAKE_SYSTEM_PROCESSOR STREQUAL "athlon")
	SET(ARCH ${CMAKE_SYSTEM_PROCESSOR})
      ENDIF(CMAKE_SYSTEM_PROCESSOR STREQUAL "athlon")
    ENDIF(UNAME_EXECUTABLE)
  ENDIF(ARCH_EXECUTABLE)
ENDIF(NOT ARCH )
MESSAGE(STATUS "configure for architecture ${ARCH}, CMAKE PROCESSOR = ${CMAKE_SYSTEM_PROCESSOR}")
